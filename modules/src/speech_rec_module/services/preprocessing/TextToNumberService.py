from typing import Optional, List, Tuple, Set
from functools import lru_cache
from interfaces import IService
import re


class TextToNumberService(IService):
    SERVICE_NAME = "TextToNumberService"

    DIGITS = {
        'Ð½Ð¾Ð»ÑŒ': 0, 'Ð¾Ð´Ð¸Ð½': 1, 'Ð¾Ð´Ð½Ð°': 1, 'Ð´Ð²Ð°': 2, 'Ð´Ð²Ðµ': 2, 'Ñ‚Ñ€Ð¸': 3,
        'Ñ‡ÐµÑ‚Ñ‹Ñ€Ðµ': 4, 'Ð¿ÑÑ‚ÑŒ': 5, 'ÑˆÐµÑÑ‚ÑŒ': 6, 'ÑÐµÐ¼ÑŒ': 7, 'Ð²Ð¾ÑÐµÐ¼ÑŒ': 8, 'Ð´ÐµÐ²ÑÑ‚ÑŒ': 9
    }

    TEENS = {
        'Ð´ÐµÑÑÑ‚ÑŒ': 10, 'Ð¾Ð´Ð¸Ð½Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 11, 'Ð´Ð²ÐµÐ½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 12, 'Ñ‚Ñ€Ð¸Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 13,
        'Ñ‡ÐµÑ‚Ñ‹Ñ€Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 14, 'Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 15, 'ÑˆÐµÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 16,
        'ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 17, 'Ð²Ð¾ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 18, 'Ð´ÐµÐ²ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 19
    }

    TENS = {
        'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ': 20, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚ÑŒ': 30, 'ÑÐ¾Ñ€Ð¾Ðº': 40, 'Ð¿ÑÑ‚ÑŒÐ´ÐµÑÑÑ‚': 50,
        'ÑˆÐµÑÑ‚ÑŒÐ´ÐµÑÑÑ‚': 60, 'ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚': 70, 'Ð²Ð¾ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚': 80, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð¾': 90
    }

    HUNDREDS = {
        'ÑÑ‚Ð¾': 100, 'Ð´Ð²ÐµÑÑ‚Ð¸': 200, 'Ñ‚Ñ€Ð¸ÑÑ‚Ð°': 300, 'Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑÑ‚Ð°': 400,
        'Ð¿ÑÑ‚ÑŒÑÐ¾Ñ‚': 500, 'ÑˆÐµÑÑ‚ÑŒÑÐ¾Ñ‚': 600, 'ÑÐµÐ¼ÑŒÑÐ¾Ñ‚': 700,
        'Ð²Ð¾ÑÐµÐ¼ÑŒÑÐ¾Ñ‚': 800, 'Ð´ÐµÐ²ÑÑ‚ÑŒÑÐ¾Ñ‚': 900
    }

    SCALE_WORDS = {
        'Ñ‚Ñ‹ÑÑÑ‡Ð°': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð¸': 1000, 'Ñ‚Ñ‹ÑÑÑ‡': 1000,
        'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð°': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð¾Ð²': 1000000,
        'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð°': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð¾Ð²': 1000000000
    }

    ORDINAL_BASES = {
        'Ð¿ÐµÑ€Ð²Ñ‹Ð¹': 1, 'Ð¿ÐµÑ€Ð²Ð°Ñ': 1, 'Ð¿ÐµÑ€Ð²Ð¾Ðµ': 1, 'Ð¿ÐµÑ€Ð²Ñ‹Ðµ': 1, 'Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾': 1, 'Ð¿ÐµÑ€Ð²Ð¾Ð¹': 1, 'Ð¿ÐµÑ€Ð²Ð¾Ð¼Ñƒ': 1, 'Ð¿ÐµÑ€Ð²Ñ‹Ð¼': 1,
        'Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹': 2, 'Ð²Ñ‚Ð¾Ñ€Ð°Ñ': 2, 'Ð²Ñ‚Ð¾Ñ€Ð¾Ðµ': 2, 'Ð²Ñ‚Ð¾Ñ€Ñ‹Ðµ': 2, 'Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾': 2, 'Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹': 2, 'Ð²Ñ‚Ð¾Ñ€Ð¾Ð¼Ñƒ': 2, 'Ð²Ñ‚Ð¾Ñ€Ñ‹Ð¼': 2,
        'Ñ‚Ñ€ÐµÑ‚Ð¸Ð¹': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÑ': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÐµ': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÐ¸': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ³Ð¾': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ¹': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ¼Ñƒ': 3, 'Ñ‚Ñ€ÐµÑ‚ÑŒÐ¸Ð¼': 3,
        'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð¹': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ð°Ñ': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ð¾Ðµ': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ñ‹Ðµ': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ð¾Ð³Ð¾': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ð¾Ð¹': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ð¾Ð¼Ñƒ': 4, 'Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð¼': 4,
        'Ð¿ÑÑ‚Ñ‹Ð¹': 5, 'Ð¿ÑÑ‚Ð°Ñ': 5, 'Ð¿ÑÑ‚Ð¾Ðµ': 5, 'Ð¿ÑÑ‚Ñ‹Ðµ': 5, 'Ð¿ÑÑ‚Ð¾Ð³Ð¾': 5, 'Ð¿ÑÑ‚Ð¾Ð¹': 5, 'Ð¿ÑÑ‚Ð¾Ð¼Ñƒ': 5, 'Ð¿ÑÑ‚Ñ‹Ð¼': 5,
        'ÑˆÐµÑÑ‚Ð¾Ð¹': 6, 'ÑˆÐµÑÑ‚Ð°Ñ': 6, 'ÑˆÐµÑÑ‚Ð¾Ðµ': 6, 'ÑˆÐµÑÑ‚Ñ‹Ðµ': 6, 'ÑˆÐµÑÑ‚Ð¾Ð³Ð¾': 6, 'ÑˆÐµÑÑ‚Ð¾Ð¹': 6, 'ÑˆÐµÑÑ‚Ð¾Ð¼Ñƒ': 6, 'ÑˆÐµÑÑ‚Ñ‹Ð¼': 6,
        'ÑÐµÐ´ÑŒÐ¼Ð¾Ð¹': 7, 'ÑÐµÐ´ÑŒÐ¼Ð°Ñ': 7, 'ÑÐµÐ´ÑŒÐ¼Ð¾Ðµ': 7, 'ÑÐµÐ´ÑŒÐ¼Ñ‹Ðµ': 7, 'ÑÐµÐ´ÑŒÐ¼Ð¾Ð³Ð¾': 7, 'ÑÐµÐ´ÑŒÐ¼Ð¾Ð¹': 7, 'ÑÐµÐ´ÑŒÐ¼Ð¾Ð¼Ñƒ': 7, 'ÑÐµÐ´ÑŒÐ¼Ñ‹Ð¼': 7,
        'Ð²Ð¾ÑÑŒÐ¼Ð¾Ð¹': 8, 'Ð²Ð¾ÑÑŒÐ¼Ð°Ñ': 8, 'Ð²Ð¾ÑÑŒÐ¼Ð¾Ðµ': 8, 'Ð²Ð¾ÑÑŒÐ¼Ñ‹Ðµ': 8, 'Ð²Ð¾ÑÑŒÐ¼Ð¾Ð³Ð¾': 8, 'Ð²Ð¾ÑÑŒÐ¼Ð¾Ð¹': 8, 'Ð²Ð¾ÑÑŒÐ¼Ð¾Ð¼Ñƒ': 8, 'Ð²Ð¾ÑÑŒÐ¼Ñ‹Ð¼': 8,
        'Ð´ÐµÐ²ÑÑ‚Ñ‹Ð¹': 9, 'Ð´ÐµÐ²ÑÑ‚Ð°Ñ': 9, 'Ð´ÐµÐ²ÑÑ‚Ð¾Ðµ': 9, 'Ð´ÐµÐ²ÑÑ‚Ñ‹Ðµ': 9, 'Ð´ÐµÐ²ÑÑ‚Ð¾Ð³Ð¾': 9, 'Ð´ÐµÐ²ÑÑ‚Ð¾Ð¹': 9, 'Ð´ÐµÐ²ÑÑ‚Ð¾Ð¼Ñƒ': 9, 'Ð´ÐµÐ²ÑÑ‚Ñ‹Ð¼': 9,

        'Ð´ÐµÑÑÑ‚Ñ‹Ð¹': 10, 'Ð´ÐµÑÑÑ‚Ð°Ñ': 10, 'Ð´ÐµÑÑÑ‚Ð¾Ðµ': 10, 'Ð´ÐµÑÑÑ‚Ñ‹Ðµ': 10,
        'Ð¾Ð´Ð¸Ð½Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 11, 'Ð¾Ð´Ð¸Ð½Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 11, 'Ð¾Ð´Ð¸Ð½Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 11, 'Ð¾Ð´Ð¸Ð½Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 11,
        'Ð´Ð²ÐµÐ½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 12, 'Ð´Ð²ÐµÐ½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 12, 'Ð´Ð²ÐµÐ½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 12, 'Ð´Ð²ÐµÐ½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 12,
        'Ñ‚Ñ€Ð¸Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 13, 'Ñ‚Ñ€Ð¸Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 13, 'Ñ‚Ñ€Ð¸Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 13, 'Ñ‚Ñ€Ð¸Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 13,
        'Ñ‡ÐµÑ‚Ñ‹Ñ€Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 14, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 14, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 14, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 14,
        'Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 15, 'Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 15, 'Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 15, 'Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 15,
        'ÑˆÐµÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 16, 'ÑˆÐµÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 16, 'ÑˆÐµÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 16, 'ÑˆÐµÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 16,
        'ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 17, 'ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 17, 'ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 17, 'ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 17,
        'Ð²Ð¾ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 18, 'Ð²Ð¾ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 18, 'Ð²Ð¾ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 18, 'Ð²Ð¾ÑÐµÐ¼Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 18,
        'Ð´ÐµÐ²ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 19, 'Ð´ÐµÐ²ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 19, 'Ð´ÐµÐ²ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 19, 'Ð´ÐµÐ²ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 19,

        'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 20, 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ð°Ñ': 20, 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 20, 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 20,
        'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ð³Ð¾': 20, 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ð¹': 20, 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ð¼Ñƒ': 20, 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚Ñ‹Ð¼': 20,
        'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ñ‹Ð¹': 30, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ð°Ñ': 30, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ð¾Ðµ': 30, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ñ‹Ðµ': 30,
        'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ð¾Ð³Ð¾': 30, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ð¾Ð¹': 30, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ð¾Ð¼Ñƒ': 30, 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚Ñ‹Ð¼': 30,
        'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ð¾Ð¹': 40, 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ð°Ñ': 40, 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ð¾Ðµ': 40, 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ñ‹Ðµ': 40,
        'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ð¾Ð³Ð¾': 40, 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ð¾Ð¹': 40, 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ð¾Ð¼Ñƒ': 40, 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²Ñ‹Ð¼': 40,
        'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¹': 50, 'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð°Ñ': 50, 'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ðµ': 50, 'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ðµ': 50,
        'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð³Ð¾': 50, 'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¹': 50, 'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¼Ñƒ': 50, 'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¼': 50,
        'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¹': 60, 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð°Ñ': 60, 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ðµ': 60, 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ðµ': 60,
        'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð³Ð¾': 60, 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¹': 60, 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¼Ñƒ': 60, 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¼': 60,
        'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¹': 70, 'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð°Ñ': 70, 'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ðµ': 70, 'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ðµ': 70,
        'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð³Ð¾': 70, 'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¹': 70, 'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¼Ñƒ': 70, 'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¼': 70,
        'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¹': 80, 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð°Ñ': 80, 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ðµ': 80, 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ðµ': 80,
        'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð³Ð¾': 80, 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¹': 80, 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ð¾Ð¼Ñƒ': 80, 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚Ñ‹Ð¼': 80,
        'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ñ‹Ð¹': 90, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð°Ñ': 90, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð¾Ðµ': 90, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ñ‹Ðµ': 90,
        'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð¾Ð³Ð¾': 90, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð¾Ð¹': 90, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð¾Ð¼Ñƒ': 90, 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ñ‹Ð¼': 90,

        'ÑÐ¾Ñ‚Ñ‹Ð¹': 100, 'ÑÐ¾Ñ‚Ð°Ñ': 100, 'ÑÐ¾Ñ‚Ð¾Ðµ': 100, 'ÑÐ¾Ñ‚Ñ‹Ðµ': 100,
        'ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 100, 'ÑÐ¾Ñ‚Ð¾Ð¹': 100, 'ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 100, 'ÑÐ¾Ñ‚Ñ‹Ð¼': 100,
        'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ñ‹Ð¹': 200, 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ð°Ñ': 200, 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ð¾Ðµ': 200, 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ñ‹Ðµ': 200,
        'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 200, 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ð¾Ð¹': 200, 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 200, 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚Ñ‹Ð¼': 200,
        'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ñ‹Ð¹': 300, 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð°Ñ': 300, 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ðµ': 300, 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ñ‹Ðµ': 300,
        'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 300, 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ð¹': 300, 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 300, 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ñ‹Ð¼': 300,
        'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ñ‹Ð¹': 400, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð°Ñ': 400, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ðµ': 400, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ñ‹Ðµ': 400,
        'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 400, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ð¹': 400, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 400, 'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚Ñ‹Ð¼': 400,
        'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ð¹': 500, 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð°Ñ': 500, 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ðµ': 500, 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ðµ': 500,
        'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 500, 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð¹': 500, 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 500, 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ð¼': 500,
        'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ð¹': 600, 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ð°Ñ': 600, 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ðµ': 600, 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ðµ': 600,
        'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 600, 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð¹': 600, 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 600, 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ð¼': 600,
        'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ñ‹Ð¹': 700, 'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ð°Ñ': 700, 'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ðµ': 700, 'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ñ‹Ðµ': 700,
        'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 700, 'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ð¹': 700, 'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 700, 'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚Ñ‹Ð¼': 700,
        'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ñ‹Ð¹': 800, 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ð°Ñ': 800, 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ðµ': 800, 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ñ‹Ðµ': 800,
        'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 800, 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ð¹': 800, 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 800, 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚Ñ‹Ð¼': 800,
        'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ð¹': 900, 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð°Ñ': 900, 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ðµ': 900, 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ðµ': 900,
        'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð³Ð¾': 900, 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð¹': 900, 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ð¾Ð¼Ñƒ': 900, 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚Ñ‹Ð¼': 900,

        'Ñ‚Ñ‹ÑÑÑ‡Ð½Ñ‹Ð¹': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð½Ð°Ñ': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð½Ð¾Ðµ': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð½Ñ‹Ðµ': 1000,
        'Ñ‚Ñ‹ÑÑÑ‡Ð½Ð¾Ð³Ð¾': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð½Ð¾Ð¹': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð½Ð¾Ð¼Ñƒ': 1000, 'Ñ‚Ñ‹ÑÑÑ‡Ð½Ñ‹Ð¼': 1000,
        'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ñ‹Ð¹': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ð°Ñ': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ð¾Ðµ': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ñ‹Ðµ': 1000000,
        'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ð¾Ð³Ð¾': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ð¾Ð¹': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ð¾Ð¼Ñƒ': 1000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð½Ñ‹Ð¼': 1000000,
        'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ñ‹Ð¹': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ð°Ñ': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ð¾Ðµ': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ñ‹Ðµ': 1000000000,
        'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ð¾Ð³Ð¾': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ð¾Ð¹': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ð¾Ð¼Ñƒ': 1000000000, 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ñ‹Ð¼': 1000000000,
    }

    ORDINAL_SUFFIXES = [
        ('Ñ‹Ð¹', ''), ('Ð¾Ð¹', ''), ('Ð°Ñ', ''), ('Ð¾Ðµ', ''), ('Ñ‹Ðµ', ''), ('Ñ‹Ñ…', ''), ('Ñ‹Ð¼', ''),
        ('ÐµÐ³Ð¾', 'Ð¾Ð¹'), ('ÐµÐ¼', 'Ð¾Ð¼'), ('Ð¾Ð¼Ñƒ', 'Ð¾Ð¼Ñƒ'), ('ÐµÐ¹', 'ÐµÐ¹'), ('Ð¸Ð¼Ð¸', 'Ð¸Ð¼Ð¸'), ('Ñ‹Ñ…', 'Ñ‹Ñ…'),
    ]

    ALL_NUMBER_WORDS: Set[str] = (
        set(DIGITS) | set(TEENS) | set(TENS) | set(HUNDREDS) |
        set(SCALE_WORDS) | set(ORDINAL_BASES)
    )

    @classmethod
    def _is_number_word(cls, word: str) -> bool:
        word = word.lower()
        if word in cls.ALL_NUMBER_WORDS:
            return True
        return cls._normalize_ordinal(word) is not None

    @classmethod
    def _normalize_ordinal(cls, word: str) -> Optional[int]:
        word = word.lower().strip()
        if word in cls.ORDINAL_BASES:
            return cls.ORDINAL_BASES[word]

        for suffix, replacement in cls.ORDINAL_SUFFIXES:
            if word.endswith(suffix):
                base = word[:-len(suffix)] + replacement
                mapping = {
                    'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚': 'Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ', 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚': 'Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚ÑŒ', 'ÑÐ¾Ñ€Ð¾ÐºÐ¾Ð²': 'ÑÐ¾Ñ€Ð¾Ðº',
                    'Ð¿ÑÑ‚Ð¸Ð´ÐµÑÑÑ‚': 'Ð¿ÑÑ‚ÑŒÐ´ÐµÑÑÑ‚', 'ÑˆÐµÑÑ‚Ð¸Ð´ÐµÑÑÑ‚': 'ÑˆÐµÑÑ‚ÑŒÐ´ÐµÑÑÑ‚',
                    'ÑÐµÐ¼Ð¸Ð´ÐµÑÑÑ‚': 'ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚', 'Ð²Ð¾ÑÑŒÐ¼Ð¸Ð´ÐµÑÑÑ‚': 'Ð²Ð¾ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚', 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚': 'Ð´ÐµÐ²ÑÐ½Ð¾ÑÑ‚Ð¾',
                    'ÑÐ¾Ñ‚': 'ÑÑ‚Ð¾', 'Ð´Ð²ÑƒÑ…ÑÐ¾Ñ‚': 'Ð´Ð²ÐµÑÑ‚Ð¸', 'Ñ‚Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚': 'Ñ‚Ñ€Ð¸ÑÑ‚Ð°',
                    'Ñ‡ÐµÑ‚Ñ‹Ñ€Ñ‘Ñ…ÑÐ¾Ñ‚': 'Ñ‡ÐµÑ‚Ñ‹Ñ€ÐµÑÑ‚Ð°', 'Ð¿ÑÑ‚Ð¸ÑÐ¾Ñ‚': 'Ð¿ÑÑ‚ÑŒÑÐ¾Ñ‚', 'ÑˆÐµÑÑ‚Ð¸ÑÐ¾Ñ‚': 'ÑˆÐµÑÑ‚ÑŒÑÐ¾Ñ‚',
                    'ÑÐµÐ¼Ð¸ÑÐ¾Ñ‚': 'ÑÐµÐ¼ÑŒÑÐ¾Ñ‚', 'Ð²Ð¾ÑÑŒÐ¼Ð¸ÑÐ¾Ñ‚': 'Ð²Ð¾ÑÐµÐ¼ÑŒÑÐ¾Ñ‚', 'Ð´ÐµÐ²ÑÑ‚Ð¸ÑÐ¾Ñ‚': 'Ð´ÐµÐ²ÑÑ‚ÑŒÑÐ¾Ñ‚',
                    'Ñ‚Ñ‹ÑÑÑ‡': 'Ñ‚Ñ‹ÑÑÑ‡Ð°', 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½': 'Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½', 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´': 'Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´'
                }
                if base in mapping:
                    try:
                        return cls._get_value_from_known_word(mapping[base])
                    except KeyError:
                        pass
                if base == 'Ð¿ÐµÑ€Ð²': return 1
                if base == 'Ð²Ñ‚Ð¾Ñ€': return 2
                if base == 'Ñ‚Ñ€ÐµÑ‚': return 3
                if base == 'Ñ‡ÐµÑ‚Ð²ÐµÑ€Ñ‚': return 4
        return None

    @classmethod
    def _get_value_from_known_word(cls, word: str) -> int:
        if word in cls.DIGITS: return cls.DIGITS[word]
        if word in cls.TEENS: return cls.TEENS[word]
        if word in cls.TENS: return cls.TENS[word]
        if word in cls.HUNDREDS: return cls.HUNDREDS[word]
        if word in cls.SCALE_WORDS: return cls.SCALE_WORDS[word]
        if word in cls.ORDINAL_BASES: return cls.ORDINAL_BASES[word]
        raise KeyError(word)

    @classmethod
    @lru_cache(maxsize=1024)
    def text_to_number(cls, text: str) -> Optional[int]:
        if not text or not text.strip():
            return None
        words = text.lower().split()
        if not any(cls._is_number_word(word) for word in words):
            return None
        try:
            return cls._parse_number_sequence(words)
        except Exception:
            return None

    @classmethod
    def _parse_number_sequence(cls, words: List[str]) -> int:
        result = 0
        current_group = 0
        i = 0
        while i < len(words):
            word = words[i].lower()
            try:
                value = cls._get_word_value(word)
            except ValueError:
                i += 1
                continue

            if word in cls.SCALE_WORDS:
                multiplier = cls.SCALE_WORDS[word]
                if current_group == 0:
                    current_group = 1
                result += current_group * multiplier
                current_group = 0
            else:
                current_group += value
            i += 1
        return result + current_group

    @classmethod
    def _get_word_value(cls, word: str) -> int:
        word = word.lower()
        if word in cls.ALL_NUMBER_WORDS:
            return cls._get_value_from_known_word(word)
        ordinal = cls._normalize_ordinal(word)
        if ordinal is not None:
            return ordinal
        raise ValueError(f"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾Ð²Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾: {word}")

    @classmethod
    def execute(cls, text: str) -> str:
        if not text or not text.strip():
            return text

        tokens = re.findall(r'\S+|\s+', text)
        word_positions = [(i, token.lower()) for i, token in enumerate(tokens) if not token.isspace()]
        replacements = cls._find_number_sequences(word_positions)

        result_tokens = tokens.copy()
        for start, end, number in sorted(replacements, reverse=True):
            result_tokens[start:end + 1] = [f"{number}"]

        return ''.join(result_tokens)

    @classmethod
    def _find_number_sequences(cls, word_positions: List[Tuple[int, str]]) -> List[Tuple[int, int, int]]:
        replacements = []
        used_positions = set()
        i = 0

        while i < len(word_positions):
            if i in used_positions:
                i += 1
                continue

            current_words = []
            current_indices = []
            best_number = None
            best_end_idx = None

            j = i
            while j < len(word_positions) and j not in used_positions:
                word = word_positions[j][1]
                if not cls._is_number_word(word):
                    break

                current_words.append(word)
                current_indices.append(j)
                phrase = ' '.join(current_words)

                number = cls.text_to_number(phrase)
                if number is not None:
                    best_number = number
                    best_end_idx = j

                j += 1

            if best_number is not None:
                start_token = word_positions[i][0]
                end_token = word_positions[best_end_idx][0]
                replacements.append((start_token, end_token, best_number))
                used_positions.update(current_indices[:best_end_idx - i + 1])
                i = best_end_idx + 1
            else:
                i += 1

        return replacements

    @classmethod
    def test(cls, console_output: bool = False):
        test_cases = [
            {'input': "Ð¿Ñ€Ð¸Ð²ÐµÑ‚ ÑÑ‚Ð¾ Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ Ð¿ÑÑ‚ÑŒ Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ ÑÐµÐ¼ÑŒ", 'output': "Ð¿Ñ€Ð¸Ð²ÐµÑ‚ 125 Ð¿Ð¾Ñ‚Ð¾Ð¼ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° 27"},
            {'input': "Ñƒ Ð¼ÐµÐ½Ñ ÐµÑÑ‚ÑŒ Ñ‚Ñ€Ð¸ ÐºÐ¾Ñ‚Ð° Ð¸ Ð¿ÑÑ‚ÑŒ ÑÐ¾Ð±Ð°Ðº", 'output': "Ñƒ Ð¼ÐµÐ½Ñ ÐµÑÑ‚ÑŒ 3 ÐºÐ¾Ñ‚Ð° Ð¸ 5 ÑÐ¾Ð±Ð°Ðº"},
            {'input': "ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð´Ð²Ðµ Ñ‚Ñ‹ÑÑÑ‡Ð¸ Ñ‚Ñ€Ð¸ÑÑ‚Ð° Ñ€ÑƒÐ±Ð»ÐµÐ¹", 'output': "ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ 2300 Ñ€ÑƒÐ±Ð»ÐµÐ¹"},
            {'input': "Ð¾Ð´Ð¸Ð½ Ð´Ð²Ð° Ñ‚Ñ€Ð¸ Ñ‡ÐµÑ‚Ñ‹Ñ€Ðµ", 'output': "10"},
            {'input': "Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ Ð±ÐµÐ· Ñ‡Ð¸ÑÐµÐ»", 'output': "Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ Ð±ÐµÐ· Ñ‡Ð¸ÑÐµÐ»"},
            {'input': "ÑÑ‚Ð¾", 'output': "100"},
            {'input': "Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð³Ð¾Ð´", 'output': "21 Ð³Ð¾Ð´"},
            {'input': "ÑÑ‚Ð¾ Ñ‚ÐµÑÑ‚ Ñ    Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼Ð¸     Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð°Ð¼Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ ÑÑ‚Ð¾ Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ ÑÐ»Ð¾Ð²Ð°Ð¼Ð¸", 'output': "ÑÑ‚Ð¾ Ñ‚ÐµÑÑ‚ Ñ    Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼Ð¸     Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð°Ð¼Ð¸ Ð¼ÐµÐ¶Ð´Ñƒ 120 ÑÐ»Ð¾Ð²Ð°Ð¼Ð¸"},
            {'input': "Ñ‚Ñ‹ÑÑÑ‡Ð° Ð´Ð²ÐµÑÑ‚Ð¸ Ñ‚Ñ€Ð¸Ð´Ñ†Ð°Ñ‚ÑŒ Ñ‡ÐµÑ‚Ñ‹Ñ€Ðµ", 'output': "1234"},
            {'input': "Ð¿ÑÑ‚ÑŒ Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð¾Ð² ÑˆÐµÑÑ‚ÑŒÑÐ¾Ñ‚ Ñ‚Ñ‹ÑÑÑ‡ ÑÐµÐ¼ÑŒÑÐ¾Ñ‚ Ð²Ð¾ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚ Ð´ÐµÐ²ÑÑ‚ÑŒ", 'output': "5600789"},
            {'input': "Ð¾Ð´Ð¸Ð½ Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´ Ð´Ð²Ð° Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½Ð° Ñ‚Ñ€Ð¸ Ñ‚Ñ‹ÑÑÑ‡Ð¸ Ñ‡ÐµÑ‚Ñ‹Ñ€Ðµ", 'output': "1002003004"},
            {'input': "Ð´Ð²Ð°Ð´Ñ†Ð°Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ð¾Ðµ ÑÐµÐ½Ñ‚ÑÐ±Ñ€Ñ", 'output': "21 ÑÐµÐ½Ñ‚ÑÐ±Ñ€Ñ"},
            {'input': "Ñ‚Ñ‹ÑÑÑ‡Ð° Ð´ÐµÐ²ÑÑ‚ÑŒÑÐ¾Ñ‚ Ð²Ð¾ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚ Ñ‡ÐµÑ‚Ð²Ñ‘Ñ€Ñ‚Ñ‹Ð¹ Ð³Ð¾Ð´", 'output': "1984 Ð³Ð¾Ð´"},
            {'input': "Ð¿ÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚Ð¾Ðµ Ð¼Ð°Ñ", 'output': "15 Ð¼Ð°Ñ"},
            {'input': "ÑÐ¾Ñ‚Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ", 'output': "100 Ð´ÐµÐ½ÑŒ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ"},
            {'input': "Ð¼Ð¸Ð»Ð»Ð¸Ð°Ñ€Ð´Ð½Ñ‹Ð¹ ÑˆÐ°Ð³ Ñ‡ÐµÐ»Ð¾Ð²ÐµÑ‡ÐµÑÑ‚Ð²Ð°", 'output': "1000000000 ÑˆÐ°Ð³ Ñ‡ÐµÐ»Ð¾Ð²ÐµÑ‡ÐµÑÑ‚Ð²Ð°"},
            {'input': "Ñ‚Ñ€ÐµÑ‚Ð¸Ð¹ ÑÐµÐ·Ð¾Ð½ ÑÐµÑ€Ð¸Ð°Ð»Ð°", 'output': "3 ÑÐµÐ·Ð¾Ð½ ÑÐµÑ€Ð¸Ð°Ð»Ð°"},
            {'input': "Ð²Ð¾ÑÐµÐ¼ÑŒÐ´ÐµÑÑÑ‚ Ð²Ð¾ÑÑŒÐ¼Ð¾Ð¹ ÐºÐ²Ð°Ñ€Ñ‚Ð°Ð»", 'output': "88 ÐºÐ²Ð°Ñ€Ñ‚Ð°Ð»"},
        ]

        if console_output:
            print("Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ TextToNumberService:")
            print("=" * 60)

        for idx, case in enumerate(test_cases):
            result = cls.execute(case['input'])
            assert result == case['output'], f"Ð¢ÐµÑÑ‚ {idx} Ð½Ðµ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½: {result} != {case['output']}"
            if console_output:
                print(f"âœ… Ð¢ÐµÑÑ‚ {idx + 1} Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½: '{case['input']}' â†’ '{result}'")

        if console_output:
            print(f"\nðŸŽ‰ Ð’ÑÐµ {len(test_cases)} Ñ‚ÐµÑÑ‚Ð¾Ð² Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½Ñ‹ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!")
        return True


if __name__ == "__main__":
    TextToNumberService.test(console_output=True)